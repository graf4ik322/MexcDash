# Техническое задание: Trading Dashboard

## 1. Общее описание проекта

Необходимо разработать веб-приложение для анализа торговой статистики, которое будет загружать данные из Excel файла (xlsx) и отображать их в виде интерактивного dashboard'а, аналогичного интерфейсу сервиса "trade make money".

## 2. Технические требования

### 2.1 Стек технологий
- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Без серверной части**: полностью клиентское решение
- **Без сборки**: готовое к запуску приложение
- **Допустимые библиотеки**:
  - SheetJS (для работы с xlsx файлами)
  - Chart.js или Plotly.js (для графиков)
  - Bootstrap или Tailwind CSS (для стилизации)
  - Moment.js или Day.js (для работы с датами)

### 2.2 Браузерная совместимость
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 3. Функциональные требования

### 3.1 Загрузка данных
- Загрузка xlsx файла через input type="file"
- Автоматический парсинг структуры файла
- Валидация данных и уведомления об ошибках
- Поддержка файлов размером до 10 МБ

### 3.2 Основной интерфейс

#### 3.2.1 Карточки дневной статистики
Отображение карточек по дням с информацией:
- **Дата**: в формате "ДД АВГ" (день недели сокращенно)
- **Прибыль/убыток**: с цветовой индикацией
  - Зеленый фон для прибыли
  - Красный фон для убытков
- **Процент изменения**: в цветной полосе снизу
- **Детальная статистика** (при клике/ховере):
  - Win rate (процент выигрышных сделок)
  - Long/Short (количество длинных/коротких позиций)
  - Turnover (оборот)
  - Fee (комиссии)

#### 3.2.2 Сводная панель (справа)
- **Текущий период**: отображение диапазона дат
- **Общая прибыль за период**
- **Кнопки переключения периодов**:
  - Неделя
  - Месяц
  - Произвольный период (date picker)

### 3.3 Дополнительная функциональность

#### 3.3.1 Графики и аналитика
- График кумулятивной прибыли
- Гистограмма распределения прибыли по дням
- Win rate по периодам
- Анализ лучших/худших торговых дней

#### 3.3.2 Фильтры и сортировка
- Фильтр по типу позиций (Long/Short/All)
- Сортировка по прибыли, дате, проценту
- Поиск по диапазону дат

#### 3.3.3 Экспорт данных
- Экспорт отфильтрованных данных в CSV
- Сохранение скриншота dashboard'а

## 4. Дизайн и UX требования

### 4.1 Визуальный стиль
- **Цветовая схема**: темная тема как основная
- **Цвета индикаторов**:
  - Зеленый (#00C851) - прибыль
  - Красный (#FF3547) - убыток
  - Синий (#007BFF) - нейтральные элементы
- **Типографика**: современный sans-serif шрифт
- **Отступы**: консистентная сетка 8px

### 4.2 Адаптивность
- Корректное отображение на экранах от 1200px
- Адаптация для планшетов (768px+)
- Мобильная версия (опционально)

### 4.3 Анимации и переходы
- Плавные переходы между состояниями (0.3s ease)
- Анимация загрузки данных
- Hover эффекты для интерактивных элементов

## 5. Структура данных Excel файла

### 5.1 Ожидаемые колонки
```
Date | Profit/Loss | Win Rate | Long Positions | Short Positions | Turnover | Fees
```

### 5.2 Альтернативные названия колонок
Система должна распознавать различные варианты названий:
- Date: "Дата", "Date", "День"
- Profit: "Прибыль", "P&L", "Profit/Loss", "PnL"
- Win Rate: "Процент побед", "Win Rate", "Win %"

## 6. Архитектура приложения

### 6.1 Структура файлов
```
trading-dashboard/
├── index.html
├── css/
│   ├── main.css
│   └── components.css
├── js/
│   ├── app.js
│   ├── data-parser.js
│   ├── dashboard.js
│   └── utils.js
├── lib/
│   ├── xlsx.min.js
│   ├── chart.min.js
│   └── moment.min.js
└── assets/
    └── icons/
```

### 6.2 Основные модули

#### 6.2.1 DataParser
```javascript
class DataParser {
    parseExcel(file) { }
    validateData(data) { }
    transformData(rawData) { }
}
```

#### 6.2.2 Dashboard
```javascript
class Dashboard {
    renderCards(data) { }
    renderSummary(data) { }
    updatePeriod(startDate, endDate) { }
    filterData(filters) { }
}
```

#### 6.2.3 ChartManager
```javascript
class ChartManager {
    createProfitChart(data) { }
    createWinRateChart(data) { }
    updateCharts(newData) { }
}
```

## 7. Пользовательские сценарии

### 7.1 Основной сценарий
1. Пользователь открывает приложение
2. Загружает xlsx файл через file input
3. Система парсит данные и отображает карточки
4. Пользователь переключает периоды просмотра
5. Изучает детальную статистику

### 7.2 Дополнительные сценарии
- Фильтрация данных по критериям
- Экспорт результатов
- Анализ трендов через графики

## 8. Обработка ошибок

### 8.1 Типы ошибок
- Неподдерживаемый формат файла
- Отсутствие необходимых колонок
- Некорректные данные в ячейках
- Превышение размера файла

### 8.2 UX для ошибок
- Toast уведомления для ошибок
- Подсказки по исправлению
- Примеры корректного формата данных

## 9. Производительность

### 9.1 Требования
- Загрузка файла до 5000 строк за < 3 сек
- Переключение периодов за < 0.5 сек
- Плавная анимация 60 FPS

### 9.2 Оптимизации
- Виртуализация для больших наборов данных
- Ленивая загрузка графиков
- Кэширование вычислений

## 10. Тестирование

### 10.1 Тестовые данные
Подготовить 3 тестовых xlsx файла:
- Малый (100 записей)
- Средний (1000 записей)
- Большой (5000 записей)

### 10.2 Чек-лист функционала
- [ ] Загрузка и парсинг xlsx
- [ ] Отображение карточек дней
- [ ] Переключение периодов
- [ ] Расчет статистики
- [ ] Цветовые индикаторы
- [ ] Адаптивность
- [ ] Обработка ошибок

## 11. Дальнейшее развитие

### 11.1 Возможные улучшения
- Сравнение нескольких периодов
- Прогнозирование трендов
- Интеграция с торговыми API
- Уведомления о важных событиях
- Экспорт в PDF отчеты

### 11.2 Техническая архитектура для роста
- Модульная архитектура для легкого расширения
- Настраиваемые виджеты dashboard'а
- Система плагинов для новой аналитики

---

## Приложения

### A. Пример структуры данных
```javascript
const sampleData = {
  "2024-08-11": {
    profit: -1542.83,
    percent: -0.97,
    winRate: 99,
    longShort: "1532/497",
    turnover: 322172.72,
    fee: 0.074
  }
  // ...
}
```

### B. Цветовая палитра
- Фон приложения: #1a1a1a
- Карточки: #2d2d2d  
- Текст основной: #ffffff
- Текст вторичный: #b0b0b0
- Прибыль: #00C851
- Убыток: #FF3547
- Акцент: #007BFF